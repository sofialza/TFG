¬°Vamos a dejar los reportes cerrados y prolijos para tu MVP! Abajo ten√©s la definici√≥n funcional (qu√© deben hacer y mostrar), el contrato de datos can√≥nico para que no haya desfaces FE/BE, y los criterios de aceptaci√≥n. Sin meternos en c√≥mo codificarlo.

üìä Reportes
1) Compras pendientes
Objetivo

Bandeja operativa para controlar √≥rdenes abiertas (salidas desde ‚ÄúSimular pedido‚Äù) y confirmar recepci√≥n comparando lo pedido vs lo recibido.

Qu√© debe mostrar (tabla visible siempre)

Columnas:

Fecha Pedido (dd/mm/aaaa)

Proveedor

Insumo

Unidad

Cant. Pedida

Cant. Recibida (editable)

Estado (Pendiente)

Acci√≥n (üü¶ Confirmar Recepci√≥n)

Barra superior (opcional, MVP-friendly):

Filtros: Proveedor y Fecha Pedido

Contador: ‚ÄúN pedidos pendientes‚Äù

C√≥mo debe funcionar

La tabla lista cada rengl√≥n de orden pendiente (no solo cabeceras), as√≠ se puede confirmar por insumo.

El usuario edita Cant. Recibida si no coincide con lo pedido y pulsa Confirmar Recepci√≥n:

Se actualiza el stock del insumo con la cantidad recibida.

Se registra Fecha de actualizaci√≥n del stock (ahora).

El rengl√≥n (o la orden) pasa a Hist√≥rico.

MVP simple: una confirmaci√≥n cierra el rengl√≥n aunque haya diferencia; la diferencia queda registrada (comparativa pedida vs recibida).

Importante: Si no hay datos, mostrar la tabla igualmente con el mensaje ‚ÄúSin datos‚Äù.

Contrato de datos (canon)

GET /api/ordenes-compra/pendientes ‚Üí JSON

[
  {
    "idOrden": 101,
    "idRenglon": 1011,
    "fechaPedidoISO": "2025-11-10",
    "proveedor": "Proveedor Central",
    "insumo": "Jam√≥n",
    "unidad": "gr",
    "cantPedida": 8000,
    "cantRecibida": null, 
    "estado": "PENDIENTE"
  }
]


PUT /api/ordenes-compra/{idRenglon}/confirmar-recepcion
Body esperado:

{ "cantRecibida": 7500 }


Respuesta (√©xito, rengl√≥n movido a hist√≥rico):

{ "ok": true, "movidoAHistorico": true }


El frontend muestra dd/mm/aaaa; el backend entrega ISO.

2) Hist√≥rico de compras
Objetivo

Trazabilidad de todo lo ya recibido, con comparativa pedida vs recibida y exportaci√≥n CSV/Excel.

Qu√© debe mostrar (tabla visible siempre)

Columnas:

Fecha Recepci√≥n (dd/mm/aaaa)

Proveedor

Insumo

Unidad

Cant. Pedida

Cant. Recibida

Actualizado por (opcional para MVP)

Acciones:

üìù Exportar CSV/Excel (descarga lo visible aplicando filtros).

Filtros (opcionales, MVP-friendly):

Rango de fechas y Proveedor.

C√≥mo debe funcionar

Cada √≠tem confirmado en ‚ÄúCompras pendientes‚Äù aparece aqu√≠.

La comparativa pedida vs recibida es visible para auditor√≠a.

La exportaci√≥n descarga exactamente las columnas visibles.

Contrato de datos (canon)

GET /api/ordenes-compra/historico?desde=YYYY-MM-DD&hasta=YYYY-MM-DD&proveedor=... ‚Üí JSON

[
  {
    "idOrden": 101,
    "idRenglon": 1011,
    "fechaRecepcionISO": "2025-11-12",
    "proveedor": "Proveedor Central",
    "insumo": "Jam√≥n",
    "unidad": "gr",
    "cantPedida": 8000,
    "cantRecibida": 7500,
    "actualizadoPor": "Encargada Cocina"
  }
]

Reglas comunes a ambos reportes

Roles y permisos (UI):

Administrador / Encargada de Cocina: ven y editan (botones activos).

Organizador/a: solo lectura (botones deshabilitados con tooltip ‚ÄúAcci√≥n no disponible para su perfil de usuario.‚Äù).

Fechas: mostrar dd/mm/aaaa en UI; transportar ISO en API.

Tabla siempre visible: incluso sin datos (mostrar ‚ÄúSin datos‚Äù).

C√°lculo de stock (MVP): al confirmar recepci√≥n, sumar ‚ÄúCant. Recibida‚Äù al stock del insumo y actualizar su fecha de actualizaci√≥n a ‚Äúahora‚Äù.

Criterios de aceptaci√≥n (QA)

CA-P1 (listar pendientes):
Dado que existen √≥rdenes generadas por ‚ÄúSimular pedido‚Äù,
cuando ingreso a Compras pendientes,
entonces veo una tabla con renglones por insumo (fecha pedido, proveedor, insumo, unidad, cant. pedida, cant. recibida [editable]).

CA-P2 (confirmar recepci√≥n):
Dado un rengl√≥n pendiente,
cuando edito ‚ÄúCant. Recibida‚Äù y pulso Confirmar Recepci√≥n,
entonces el stock del insumo se incrementa con esa cantidad, se registra la fecha, y el rengl√≥n se mueve al Hist√≥rico.

CA-H1 (ver hist√≥rico):
Dado que confirm√© recepciones,
cuando abro Hist√≥rico de compras,
entonces veo fecha recepci√≥n, proveedor, insumo, unidad, cant. pedida y recibida.

CA-H2 (exportaci√≥n):
Dado que necesito un informe,
cuando presiono Exportar CSV/Excel,
entonces descargo un archivo con exactamente las columnas y filtros aplicados.

CA-Roles:
Dado que entro con el rol Organizador,
cuando veo cualquiera de los reportes,
entonces los botones de acci√≥n est√°n deshabilitados y muestran tooltip informativo.

Ejemplos esperados en UI (para probar r√°pido)

Compras pendientes (ejemplo):

Fecha Pedido	Proveedor	Insumo	Unidad	Cant. Pedida	Cant. Recibida	Estado	Acci√≥n
10/11/2025	Proveedor Central	Jam√≥n	gr	8.000	[ 7.500 ]	Pendiente	Confirmar Recepci√≥n
11/11/2025	Dulces SA	Harina	gr	2.000	[ 2.000 ]	Pendiente	Confirmar Recepci√≥n

Hist√≥rico (ejemplo):

Fecha Recepci√≥n	Proveedor	Insumo	Unidad	Cant. Pedida	Cant. Recibida	Actualizado por
12/11/2025	Proveedor Central	Jam√≥n	gr	8.000	7.500	Encargada Cocina
12/11/2025	Dulces SA	Harina	gr	2.000	2.000	Encargada Cocina